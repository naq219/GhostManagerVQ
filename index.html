<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHÙA VIÊN QUANG - Thông Tin Hương Linh</title>
    <link rel="stylesheet" href="./css/style.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Vue.js 3 CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- PocketBase -->
    <script src="https://unpkg.com/pocketbase@latest/dist/pocketbase.umd.js"></script>
    <!-- Fuse.js for fuzzy search -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
</head>
<body>
    <div id="app">
        <header>
            <div class="container">
                <h1>CHÙA VIÊN QUANG</h1>
                <p>Thông Tin Hương Linh</p>
                <nav>
                    <ul>
                        <li><a href="#" @click.prevent="currentPage = 'home'" :class="{ active: currentPage === 'home' }">Trang chủ</a></li>
                        <li><a href="#" @click.prevent="currentPage = 'contact'" :class="{ active: currentPage === 'contact' }">Liên hệ</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <main class="container">
            <!-- Trang chủ / Tra cứu -->
            <div v-if="currentPage === 'home'">
                <div class="search-container">
                    <div class="search-box">
                        <input 
                            type="text" 
                            v-model="searchQuery" 
                            placeholder="Tên hoặc số điện thoại..." 
                            @input="performSearch"
                        >
                        <button class="search-button" @click="performSearch">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>

                <div class="search-results" v-if="searchResults.length > 0">
                    <h2>Kết quả tìm kiếm</h2>
                    <div class="result-cards">
                        <div class="card" v-for="result in searchResults" :key="result.id" @click="showDetail(result)">
                            <h3>{{ result.hoten_die }}</h3>
                            <p><strong>Người gửi:</strong> {{ result.hoten_owner }}</p>
                            <p><strong>Vị trí:</strong> Bảng {{ result.bang }}, Hàng {{ result.hang }}, Cột {{ result.cot }}</p>
                        </div>
                    </div>
                </div>
                
                <div class="no-results" v-else-if="hasSearched">
                    <p>Không tìm thấy kết quả phù hợp.</p>
                </div>

                <div class="welcome-message" v-else>
                    <p>Nhập tên <b>hương linh</b>, tên <b>người gửi</b> hoặc <b>số điện thoại</b> để tra cứu.</p>
                </div>
            </div>

            <!-- Trang chi tiết -->
            <div v-if="currentPage === 'detail'" class="detail-page">
                <button class="back-button" @click="currentPage = 'home'">
                    <i class="fas fa-arrow-left"></i> Quay lại
                </button>
                
                <div class="detail-card">
                    <h2>{{ selectedRecord.hoten_die }}</h2>
                    <div class="detail-info">
                        <p><strong>Người gửi:</strong> {{ selectedRecord.hoten_owner }}</p>
                        <p><strong>Số điện thoại:</strong> {{ selectedRecord.sdt }}</p>
                        <p><strong>Ngày mất:</strong> {{ selectedRecord.ngay_mat }}</p>
                        <p><strong>Ngày nhập linh:</strong> {{ formatDate(selectedRecord.ngay_nhap_linh) }}</p>
                        <p><strong>Vị trí bài vị:</strong> Bảng {{ selectedRecord.bang }}, Hàng {{ selectedRecord.hang }}, Cột {{ selectedRecord.cot }}</p>
                        <p v-if="selectedRecord.note"><strong>Ghi chú:</strong> {{ selectedRecord.note }}</p>
                    </div>
                </div>
            </div>

            <!-- Trang liên hệ -->
            <div v-if="currentPage === 'contact'" class="contact-page">
                <h2>Thông tin liên hệ</h2>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>Địa chỉ chùa: [Địa chỉ chùa]</p>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <p>Số điện thoại: [Số điện thoại]</p>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <p>Email: [Email]</p>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <p>Thời gian tiếp nhận: [Thời gian]</p>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="container">
                <p>&copy; 2023 - Website tra cứu thông tin Hương Linh</p>
            </div>
        </footer>
    </div>

    <script src="./js/app.js"></script>
</body>
</html>